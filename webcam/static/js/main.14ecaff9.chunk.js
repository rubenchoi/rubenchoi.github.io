(this["webpackJsonp@rubenchoi/react-webcam-example"]=this["webpackJsonp@rubenchoi/react-webcam-example"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);a(7);var n=a(0),r=a.n(n),c=a(4),l=a.n(c),i=a(1),o=a(5),u=a(2),d=a.n(u),s=a(3),m="_styles-module__gridContainer__1bGdx",p="_styles-module__gridItem__13TFJ",f=["pan","tilt","zoom"],h=0,v=function(e){var t=Object(n.useState)({pan:!1,tilt:!1,zoom:!1}),a=Object(i.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(void 0),v=Object(i.a)(u,2),b=v[0],g=v[1],E=Object(n.useState)(void 0),w=Object(i.a)(E,2),y=w[0],x=w[1],O=Object(n.useState)(!0),j=Object(i.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)("download"),T=Object(i.a)(C,2),I=T[0],D=T[1],_=Object(n.useRef)(null),A=Object(n.useRef)(null),M=Object(n.useRef)(null),N=Object(n.useRef)(null),R=Object(n.useRef)(null),z=function(){var e=Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:e.sent.forEach((function(e){var t=document.createElement("option");switch(t.value=e.deviceId,e.kind){case"audioinput":t.text=e.label||"mic ".concat(A.current.length+1),A.current.appendChild(t);break;case"videoinput":t.text=e.label||"camera ".concat(M.current.length+1),M.current.appendChild(t);break;default:console.log("Skipped Device: "+e.kind,e&&e.label)}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var t=Object(s.a)(d.a.mark((function t(){var a,n,r,c,i,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=M.current.value,h=A.current.value,a={video:{deviceId:p?{exact:p}:void 0,pan:!0,tilt:!0,zoom:!0},audio:{deviceId:h?{exact:h}:void 0,options:{muted:!0,mirror:!0}}},t.next=3,navigator.mediaDevices.getUserMedia(a);case 3:n=t.sent,_.current.srcObject=n,r=n.getVideoTracks()[0],c=r.getCapabilities(),i=r.getSettings(),u={},f.forEach((function(e){if(u[e]=e in i,u[e]){var t=document.querySelector("input[name=".concat(e,"]"));t.min=c[e].min,t.max=c[e].max,t.step=c[e].step,t.value=i[e],t.disabled=!1,t.oninput=Object(s.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n={advanced:[Object(o.a)({},e,t.value)]},a.next=4,r.applyConstraints(n);case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))}})),l(u),g(n),x("w: "+i.width+" h: "+i.height),m={params:a,videoId:M.current.value,audioId:A.current.value,width:i.width,height:i.height},e.onStream&&e.onStream(n,m);case 15:case"end":return t.stop()}var p,h}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){z(),U()}),[]),Object(n.useEffect)((function(){b&&(b.getAudioTracks()[0].enabled=k)}),[k]);var V=function(e){var t=c[e];return r.a.createElement("div",{style:{display:t?"inline-block":"none"}},e,": ",r.a.createElement("input",{name:e,type:"range",disabled:!0}))};return r.a.createElement("div",{style:{display:e.showDetail?"block":"none"}},r.a.createElement("div",{style:{fontSize:"1em",width:"100%",border:"1px solid gray"}},r.a.createElement("h3",null,"Settings"),r.a.createElement("div",{className:m},r.a.createElement("div",{className:p},"Mic: "),r.a.createElement("div",{className:p},r.a.createElement("select",{style:{float:"left"},ref:A,onChange:function(e){return U()}}),e.onMute&&r.a.createElement("button",{onClick:function(){S(!k),e.onMute&&e.onMute(k)},style:{float:"left"}},k?"MUTE":"UNMUTE")),r.a.createElement("div",{className:p},"Video: "),r.a.createElement("div",{className:p},r.a.createElement("select",{ref:M,onChange:function(e){return U()}}))),r.a.createElement("div",null,V("pan"),V("tilt"),V("zoom"))),r.a.createElement("hr",null),r.a.createElement("div",{style:{float:"left",width:"50vw"}},r.a.createElement("video",{ref:_,autoPlay:!0,style:{width:"40%"}}),r.a.createElement("canvas",{ref:N,style:{width:"40%",marginLeft:"5%"}})),r.a.createElement("div",{style:{float:"left",padding:"2em"}},r.a.createElement("p",{style:{fontSize:"0.8em"}},y),r.a.createElement("select",{defaultValue:"640:480",onChange:function(e){return function(e){var t=e.target.value.split(":"),a=b.getVideoTracks()[0];a.applyConstraints({width:t[0],height:t[1]}).then((function(){var e=a.getSettings(),n=Number(t[0])===e.width&&Number(t[1])===e.height?"changed":"not supported - best mached";x("w: "+e.width+" h: "+e.height+"    "+n)})).catch((function(e){return console.log(e)}))}(e)}},r.a.createElement("option",{value:"3840:2160"},"UHD 4K 3840x2160"),r.a.createElement("option",{value:"1920:1080"},"FHD 1080p 1920x1080"),r.a.createElement("option",{value:"1280:720"},"HD 720p 1280x720"),r.a.createElement("option",{value:"800:600"},"SVGA 800x600"),r.a.createElement("option",{value:"640:480"},"VGA 640x480")),r.a.createElement("br",null),r.a.createElement("input",{type:"text",onChange:function(e){return D(e.target.value)},value:I}),r.a.createElement("button",{onClick:function(){var e=N.current,t=e.getContext("2d");e.width=_.current.videoWidth,e.height=_.current.videoHeight,t.drawImage(_.current,0,0),e.toBlob((function(e){var t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=I+(R.current.checked?"_"+h++:"")+".png",document.body.appendChild(t),t.click()}),"image/png"),t.font="40px Arial",t.fillStyle="red",t.fillText("Downloaded",0,40)},style:{marginTop:"1em"}},"Download"),r.a.createElement("label",{style:{fontSize:"0.8em"}},r.a.createElement("input",{type:"checkbox",ref:R,defaultChecked:!0}),"Auto-Increase")),e.audioTest&&r.a.createElement("div",{style:{clear:"both"}},r.a.createElement("hr",null),r.a.createElement("p",null,"Audio Test:"),r.a.createElement("iframe",{width:"100",height:"100",src:"https://www.youtube.com/embed/I6P24OTIeZI",title:"Audio Test",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})))},b=(a(15),function(){var e=r.a.useState(!0),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{style:{width:"90%",margin:"auto"}},r.a.createElement("h2",null,"React App Webcam Control"),r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){return n(!a)}},a?"Hide":"Show"),r.a.createElement(v,{onStream:function(e,t){console.log(e,t)},onMute:function(e){console.log(e?"muted":"unmuted")},audioTest:!0,showDetail:a}))});l.a.render(r.a.createElement(b,null),document.getElementById("root"))},6:function(e,t,a){e.exports=a(16)},7:function(e,t,a){}},[[6,1,2]]]);
//# sourceMappingURL=main.14ecaff9.chunk.js.map