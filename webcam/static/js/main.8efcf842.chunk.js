(this["webpackJsonp@rubenchoi/react-webcam-example"]=this["webpackJsonp@rubenchoi/react-webcam-example"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);n(7);var a=n(0),r=n.n(a),c=n(4),l=n.n(c),i=n(1),o=n(5),u=n(2),s=n.n(u),d=n(3),m="_styles-module__gridContainer__1bGdx",p="_styles-module__gridItem__13TFJ",v=["pan","tilt","zoom"],f=function(e){var t=Object(a.useState)({pan:!1,tilt:!1,zoom:!1}),n=Object(i.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(void 0),f=Object(i.a)(u,2),h=f[0],b=f[1],E=Object(a.useState)(void 0),g=Object(i.a)(E,2),w=g[0],y=g[1],x=Object(a.useState)(!0),j=Object(i.a)(x,2),O=j[0],k=j[1],S=Object(a.useRef)(null),C=Object(a.useRef)(null),T=Object(a.useRef)(null),_=Object(a.useRef)(null),D=Object(a.useRef)(null),I=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:e.sent.forEach((function(e){var t=document.createElement("option");switch(t.value=e.deviceId,e.kind){case"audioinput":t.text=e.label||"mic ".concat(C.current.length+1),C.current.appendChild(t);break;case"videoinput":t.text=e.label||"camera ".concat(T.current.length+1),T.current.appendChild(t);break;default:console.log("Skipped Device: "+e.kind,e&&e.label)}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var t=Object(d.a)(s.a.mark((function t(){var n,a,r,c,i,u,m;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=T.current.value,f=C.current.value,n={video:{deviceId:p?{exact:p}:void 0,pan:!0,tilt:!0,zoom:!0},audio:{deviceId:f?{exact:f}:void 0,options:{muted:!0,mirror:!0}}},t.next=3,navigator.mediaDevices.getUserMedia(n);case 3:a=t.sent,S.current.srcObject=a,r=a.getVideoTracks()[0],c=r.getCapabilities(),i=r.getSettings(),u={},v.forEach((function(e){if(u[e]=e in i,u[e]){var t=document.querySelector("input[name=".concat(e,"]"));t.min=c[e].min,t.max=c[e].max,t.step=c[e].step,t.value=i[e],t.disabled=!1,t.oninput=Object(d.a)(s.a.mark((function n(){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={advanced:[Object(o.a)({},e,t.value)]},n.next=4,r.applyConstraints(a);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))}})),l(u),b(a),y("w: "+i.width+" h: "+i.height),m={params:n,videoId:T.current.value,audioId:C.current.value,width:i.width,height:i.height},e.onStream&&e.onStream(a,m);case 15:case"end":return t.stop()}var p,f}),t)})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){I(),M()}),[]),Object(a.useEffect)((function(){h&&(h.getAudioTracks()[0].enabled=O)}),[O]);var R=function(e){var t=c[e];return r.a.createElement("div",{style:{display:t?"inline-block":"none"}},e,": ",r.a.createElement("input",{name:e,type:"range",disabled:!0}))};return r.a.createElement("div",{style:{display:e.showDetail?"block":"none"}},r.a.createElement("div",{style:{fontSize:"1em",width:"fit-content",border:"1px solid gray"}},r.a.createElement("h3",null,"Settings"),r.a.createElement("div",{className:m},r.a.createElement("div",{className:p},"Mic: "),r.a.createElement("div",{className:p},r.a.createElement("select",{style:{float:"left"},ref:C,onChange:function(e){return M()}}),e.onMute&&r.a.createElement("button",{onClick:function(){k(!O),e.onMute&&e.onMute(O)},style:{float:"left"}},O?"MUTE":"UNMUTE")),r.a.createElement("div",{className:p},"Video: "),r.a.createElement("div",{className:p},r.a.createElement("select",{ref:T,onChange:function(e){return M()}}))),r.a.createElement("div",null,R("pan"),R("tilt"),R("zoom"))),r.a.createElement("hr",null),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("video",{ref:S,autoPlay:!0,style:{width:"20vw",margin:"auto"}}),r.a.createElement("canvas",{ref:_,style:{display:"none"}})),r.a.createElement("div",{style:{float:"left",padding:"2em"}},r.a.createElement("p",{style:{fontSize:"0.8em"}},w),r.a.createElement("select",{defaultValue:"640x480",ref:D,onChange:function(e){return function(e){var t=e.target.value.split(":");console.log(t);var n=h.getVideoTracks()[0];n.applyConstraints({width:t[0],height:t[1]}).then((function(){var e=n.getSettings();y("w: "+e.width+" h: "+e.height)})).catch((function(e){return console.log(e)}))}(e)}},r.a.createElement("option",{value:"3840:2160"},"UHD 4K 3840x2160"),r.a.createElement("option",{value:"1920:1080"},"FHD 1080p 1920x1080"),r.a.createElement("option",{value:"1280:720"},"HD 720p 1280x720"),r.a.createElement("option",{value:"800:600"},"SVGA 800x600"),r.a.createElement("option",{value:"640:480"},"VGA 640x480")),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){var e=_.current,t=e.getContext("2d");e.width=S.current.videoWidth,e.height=S.current.videoHeight,t.drawImage(S.current,0,0),e.toBlob((function(e){var t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="testfile.png",document.body.appendChild(t),t.click()}),"image/png")},style:{marginTop:"1em"}},"Download")),e.audioTest&&r.a.createElement("div",{style:{clear:"both"}},r.a.createElement("hr",null),r.a.createElement("p",null,"Audio Test:"),r.a.createElement("iframe",{width:"100",height:"100",src:"https://www.youtube.com/embed/1Hkc_2b03jw",title:"Audio Test",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})))},h=(n(15),function(){var e=r.a.useState(!0),t=Object(i.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"React App Webcam Control"),r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){return a(!n)}},n?"Hide":"Show"),r.a.createElement("div",{style:{width:"40vw",margin:"1em"}},r.a.createElement(f,{onStream:function(e,t){console.log(e,t)},onMute:function(e){console.log(e?"muted":"unmuted")},audioTest:!0,showDetail:n})))});l.a.render(r.a.createElement(h,null),document.getElementById("root"))},6:function(e,t,n){e.exports=n(16)},7:function(e,t,n){}},[[6,1,2]]]);
//# sourceMappingURL=main.8efcf842.chunk.js.map