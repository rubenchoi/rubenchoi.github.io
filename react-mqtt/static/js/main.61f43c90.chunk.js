(this["webpackJsonpmqtt-client-react-example"]=this["webpackJsonpmqtt-client-react-example"]||[]).push([[0],{128:function(e,t,n){"use strict";(function(e){var a=n(0),o=n.n(a),c=(n(152),n(142)),l=n(57),r=n(274),i=n(141),s=n(91),u=n(129),m=n.n(u);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var f=c.a.Panel,b={},g=function(e,t){return null!==localStorage.getItem(e)&&void 0!==localStorage.getItem(e)||localStorage.setItem(e,t),localStorage.getItem(e)};t.a=function(t){var n=g("rubenchoi-mqtt-address","3.35.144.112"),u=g("rubenchoi-mqtt-port","8006"),d=l.a.useForm()[0],h=o.a.useState(n),E=h[0],v=h[1],y=o.a.useState(u),S=y[0],I=y[1],w=o.a.useState(void 0),C=w[0],T=w[1],k=o.a.useState(void 0),M=k[0],q=k[1],O=o.a.useState(void 0),j=O[0],D=O[1],F={wrapperCol:{span:14,offset:4}};return o.a.useEffect((function(){var n=function(n,a){var o=new e.from(a,"base64").toString("utf-8");q("["+n+"] "+o),t.callbacks.onMessage(n,o)},a=function(e){D(e),t.callbacks.onConnect(!1)};!function(){try{var e="ws://"+E+":"+S,o=m.a.connect(e);o.on("connect",(function(){console.log("MQTT Connected"),t.subscribeTo.forEach((function(e){o.subscribe(e)})),b.mqtt=o,t.callbacks.onConnect(!0)})),o.on("disconnect",(function(){return a("MQTT Disconnected")})),o.on("error",(function(e){return a(e)})),o.on("message",n)}catch(c){a(c)}}()}),[]),o.a.useEffect((function(){try{b.mqtt.publish(t.publish.topic,t.publish.payload),T(t.publish)}catch(e){console.log("ERROR: cannot publish")}}),[t.publish]),o.a.createElement(a.Fragment,null,t.settings&&o.a.createElement(r.a,{size:"small",title:"Settings",extra:"MQTT",style:{width:"50vw"}},o.a.createElement(l.a,p({},{labelCol:{span:6},wrapperCol:{span:18}},{layout:"horizontal",form:d,initialValues:{ip:E,port:S},onFinish:function(e){v(e.ip),I(e.port),localStorage.setItem("rubenchoi-mqtt-address",e.ip),localStorage.setItem("rubenchoi-mqtt-port",e.port)}}),o.a.createElement(l.a.Item,{label:"IP",name:"ip"},o.a.createElement(i.a,null)),o.a.createElement(l.a.Item,{label:"Port",name:"port"},o.a.createElement(i.a,null)),o.a.createElement(l.a.Item,F,o.a.createElement(s.a,{type:"primary",htmlType:"submit"},"Submit"))),j&&o.a.createElement("div",{style:{position:"absolute"}},j),t.log&&o.a.createElement(a.Fragment,null,o.a.createElement("p",null,"Log"),o.a.createElement(c.a,{defaultActiveKey:["1","2"]},o.a.createElement(f,{header:"Published Message",key:"1"},C&&o.a.createElement("p",null,"[",C.topic,"] ",C.payload)),o.a.createElement(f,{header:"Received Message",key:"2"},o.a.createElement("p",null,M))))))}}).call(this,n(23).Buffer)},144:function(e,t,n){e.exports=n(273)},145:function(e,t,n){},154:function(e,t){},156:function(e,t){},190:function(e,t){},191:function(e,t){},193:function(e,t){},195:function(e,t){},273:function(e,t,n){"use strict";n.r(t);n(145);var a=n(0),o=n.n(a),c=n(29),l=n.n(c),r=n(77),i=n(128),s=function(){var e=o.a.useState(void 0),t=Object(r.a)(e,2),n=t[0],a=t[1],c=o.a.useState(1),l=Object(r.a)(c,2),s=l[0],u=l[1],m=o.a.useState("Connected"),p=Object(r.a)(m,2),f=p[0],b=p[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"State: ",f),o.a.createElement("button",{style:{margin:"2em"},onClick:function(){var e=new Date,t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();a({topic:"topic1",payload:"TestData-"+s+" ---- "+t}),u(s+1)}},"Send Data"),n&&o.a.createElement("span",null,"[",n.topic,"] ",n.payload),o.a.createElement(i.a,{subscribeTo:["topic1","topic2"],publish:n,callbacks:{onConnect:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return b(e?"Connected":"Disconnected")},onMessage:function(e,t){console.log("onMessage: topic="+e,t)}},settings:!0,log:!0}))};l.a.render(o.a.createElement(s,null),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.61f43c90.chunk.js.map